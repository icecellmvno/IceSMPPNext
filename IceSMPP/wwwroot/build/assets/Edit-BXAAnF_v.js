import{m as O,j as e,L as F}from"./App-CmqUjaN5.js";import{A as D}from"./AuthenticatedLayout-C6tvOh1x.js";import{B as y}from"./button-P3a7UsiS.js";import{I as h}from"./input-BNaBDwi7.js";import{L as n}from"./label-BEB_8ICF.js";import{T as m}from"./textarea-CYa3ItW1.js";import{S as I}from"./switch-C-_rdssw.js";import{C as b,a as N,b as _,c as L,d as w}from"./card-W6xDAvb4.js";import"./index-CoAmXZ53.js";import"./index-cPx927kp.js";import"./Combination-DIdNSm4m.js";import"./index-8L4t-OO9.js";import"./createLucideIcon-DiUTaDX6.js";import"./index-MP6m9tZ7.js";import"./index-BJ4xYr-b.js";import"./index-CZ-wKduk.js";import"./dropdown-menu-DXpi-5_y.js";import"./building-2-Dch_NdWF.js";import"./coins-D9U3F2Fg.js";import"./theme-switcher-rNNMMUfo.js";import"./index-CgeA6eXF.js";function oe({auth:S,vendor:u,connection:l}){var x,j,g,v,f;const{data:t,setData:a,put:C,processing:T,errors:d}=O({type:l.type,host:l.host,port:l.port,username:l.username||"",password:"",system_type:l.system_type||"",config:{source_ton:((x=l.config)==null?void 0:x.source_ton)||"5",source_npi:((j=l.config)==null?void 0:j.source_npi)||"0",dest_ton:((g=l.config)==null?void 0:g.dest_ton)||"1",dest_npi:((v=l.config)==null?void 0:v.dest_npi)||"1",endpoints:((f=l.config)==null?void 0:f.endpoints)||[]},is_active:l.is_active,notes:l.notes||""}),A=s=>{s.preventDefault(),C(route("vendors.connections.update",[u,l]))},E=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"system_type",children:"System Type"}),e.jsx(h,{id:"system_type",value:t.system_type,onChange:s=>a("system_type",s.target.value)}),d.system_type&&e.jsx("p",{className:"text-sm text-destructive",children:d.system_type})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"source_ton",children:"Source TON"}),e.jsxs("select",{id:"source_ton",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",value:t.config.source_ton,onChange:s=>a("config",{...t.config,source_ton:s.target.value}),children:[e.jsx("option",{value:"0",children:"Unknown (0)"}),e.jsx("option",{value:"1",children:"International (1)"}),e.jsx("option",{value:"2",children:"National (2)"}),e.jsx("option",{value:"3",children:"Network Specific (3)"}),e.jsx("option",{value:"4",children:"Subscriber Number (4)"}),e.jsx("option",{value:"5",children:"Alphanumeric (5)"}),e.jsx("option",{value:"6",children:"Abbreviated (6)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"source_npi",children:"Source NPI"}),e.jsxs("select",{id:"source_npi",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",value:t.config.source_npi,onChange:s=>a("config",{...t.config,source_npi:s.target.value}),children:[e.jsx("option",{value:"0",children:"Unknown (0)"}),e.jsx("option",{value:"1",children:"ISDN/Telephone (1)"}),e.jsx("option",{value:"3",children:"Data (3)"}),e.jsx("option",{value:"4",children:"Telex (4)"}),e.jsx("option",{value:"6",children:"Land Mobile (6)"}),e.jsx("option",{value:"8",children:"National (8)"}),e.jsx("option",{value:"9",children:"Private (9)"}),e.jsx("option",{value:"10",children:"ERMES (10)"}),e.jsx("option",{value:"14",children:"Internet (14)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"dest_ton",children:"Destination TON"}),e.jsxs("select",{id:"dest_ton",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",value:t.config.dest_ton,onChange:s=>a("config",{...t.config,dest_ton:s.target.value}),children:[e.jsx("option",{value:"0",children:"Unknown (0)"}),e.jsx("option",{value:"1",children:"International (1)"}),e.jsx("option",{value:"2",children:"National (2)"}),e.jsx("option",{value:"3",children:"Network Specific (3)"}),e.jsx("option",{value:"4",children:"Subscriber Number (4)"}),e.jsx("option",{value:"5",children:"Alphanumeric (5)"}),e.jsx("option",{value:"6",children:"Abbreviated (6)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"dest_npi",children:"Destination NPI"}),e.jsxs("select",{id:"dest_npi",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",value:t.config.dest_npi,onChange:s=>a("config",{...t.config,dest_npi:s.target.value}),children:[e.jsx("option",{value:"0",children:"Unknown (0)"}),e.jsx("option",{value:"1",children:"ISDN/Telephone (1)"}),e.jsx("option",{value:"3",children:"Data (3)"}),e.jsx("option",{value:"4",children:"Telex (4)"}),e.jsx("option",{value:"6",children:"Land Mobile (6)"}),e.jsx("option",{value:"8",children:"National (8)"}),e.jsx("option",{value:"9",children:"Private (9)"}),e.jsx("option",{value:"10",children:"ERMES (10)"}),e.jsx("option",{value:"14",children:"Internet (14)"})]})]})]})]}),P=()=>{const s=(r="auth")=>{const o=t.config.endpoints||[],i={auth:{method:"POST",path:"/oauth/v3/token",content_type:"application/x-www-form-urlencoded",tag:"auth",headers:{Authorization:"{{authorization_header}}",Accept:"application/json"},template:{grant_type:"client_credentials"}},login:{method:"POST",path:"/login",content_type:"application/json",tag:"login",headers:{Accept:"application/json"},template:{username:"{{username}}",password:"{{password}}"}},sendsms:{method:"POST",path:"/sendsms",content_type:"application/json",tag:"sendsms",headers:{Authorization:"Bearer {{access_token}}",Accept:"application/json"},template:{to:"{{phone}}",message:"{{message}}",from:"{{sender}}"}},sendsms_multi:{method:"POST",path:"/sendsms/multi",content_type:"application/json",tag:"sendsms_multi",headers:{Authorization:"Bearer {{access_token}}",Accept:"application/json"},template:{messages:[{to:"{{phone}}",message:"{{message}}",from:"{{sender}}"}]}},dlrreports:{method:"GET",path:"/reports/dlr",content_type:"application/json",tag:"dlrreports",headers:{Authorization:"Bearer {{access_token}}",Accept:"application/json"},template:{message_id:"{{message_id}}",from_date:"{{from_date}}",to_date:"{{to_date}}"}}};a("config",{...t.config,endpoints:[...o,i[r]||{method:"POST",path:"",content_type:"application/json",tag:"custom",headers:{},template:{}}]})},p=(r,o,i)=>{const c=[...t.config.endpoints||[]];c[r]={...c[r],[o]:i},a("config",{...t.config,endpoints:c})},k=r=>{const o=[...t.config.endpoints||[]];o.splice(r,1),a("config",{...t.config,endpoints:o})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Endpoints"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"flex h-9 rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",onChange:r=>s(r.target.value),value:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Add Endpoint..."}),e.jsx("option",{value:"auth",children:"Authentication"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"sendsms",children:"Send SMS"}),e.jsx("option",{value:"sendsms_multi",children:"Send Multiple SMS"}),e.jsx("option",{value:"dlrreports",children:"DLR Reports"}),e.jsx("option",{value:"custom",children:"Custom Endpoint"})]})})]}),(t.config.endpoints||[]).map((r,o)=>e.jsxs(b,{children:[e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{className:"text-base",children:["Endpoint ",o+1]}),e.jsx(Badge,{variant:"outline",children:r.tag||"custom"})]}),e.jsx(y,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(o),children:"Remove"})]})}),e.jsxs(w,{className:"p-4 pt-0 space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"HTTP Method"}),e.jsxs("select",{className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",value:r.method,onChange:i=>p(o,"method",i.target.value),children:[e.jsx("option",{value:"POST",children:"POST"}),e.jsx("option",{value:"GET",children:"GET"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Content Type"}),e.jsxs("select",{className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",value:r.content_type,onChange:i=>p(o,"content_type",i.target.value),children:[e.jsx("option",{value:"application/json",children:"application/json"}),e.jsx("option",{value:"application/x-www-form-urlencoded",children:"application/x-www-form-urlencoded"}),e.jsx("option",{value:"multipart/form-data",children:"multipart/form-data"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Path"}),e.jsx(h,{value:r.path,onChange:i=>p(o,"path",i.target.value),placeholder:"/api/endpoint"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Headers (JSON)"}),e.jsx(m,{value:JSON.stringify(r.headers,null,2),onChange:i=>{try{const c=JSON.parse(i.target.value);p(o,"headers",c)}catch{p(o,"headers",i.target.value)}},placeholder:'{\\n  "Authorization": "Bearer {{access_token}}",\\n  "Accept": "application/json"\\n}'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Request Template (JSON)"}),e.jsx(m,{value:JSON.stringify(r.template,null,2),onChange:i=>{try{const c=JSON.parse(i.target.value);p(o,"template",c)}catch{p(o,"template",i.target.value)}},placeholder:'{\\n  "key": "value"\\n}'})]})]})]},o))]})};return e.jsxs(D,{user:S.user,header:{title:`Edit Connection - ${u.name}`,module:"Vendors",breadcrumbs:[{label:"Vendors",href:route("vendors.index")},{label:u.name,href:route("vendors.show",u)},{label:"Edit Connection"}]},children:[e.jsx(F,{title:`Edit Connection - ${u.name}`}),e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(_,{children:"Edit Connection"}),e.jsxs(L,{children:["Update connection details for ",u.name]})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"type",children:"Type"}),e.jsxs("select",{id:"type",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",value:t.type,onChange:s=>a("type",s.target.value),children:[e.jsx("option",{value:"smpp",children:"SMPP"}),e.jsx("option",{value:"http",children:"HTTP"})]}),d.type&&e.jsx("p",{className:"text-sm text-destructive",children:d.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"host",children:"Host"}),e.jsx(h,{id:"host",value:t.host,onChange:s=>a("host",s.target.value),placeholder:"e.g. smpp.example.com"}),d.host&&e.jsx("p",{className:"text-sm text-destructive",children:d.host})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"port",children:"Port"}),e.jsx(h,{id:"port",type:"number",value:t.port,onChange:s=>a("port",s.target.value),placeholder:"e.g. 2775"}),d.port&&e.jsx("p",{className:"text-sm text-destructive",children:d.port})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"username",children:"Username"}),e.jsx(h,{id:"username",value:t.username,onChange:s=>a("username",s.target.value)}),d.username&&e.jsx("p",{className:"text-sm text-destructive",children:d.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"password",children:"Password"}),e.jsx(h,{id:"password",type:"password",value:t.password,onChange:s=>a("password",s.target.value),placeholder:"Leave blank to keep current password"}),d.password&&e.jsx("p",{className:"text-sm text-destructive",children:d.password})]}),t.type==="smpp"&&E(),t.type==="http"&&P(),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:"is_active",checked:t.is_active,onCheckedChange:s=>a("is_active",s)}),e.jsx(n,{htmlFor:"is_active",children:"Active"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"notes",children:"Notes"}),e.jsx(m,{id:"notes",value:t.notes,onChange:s=>a("notes",s.target.value)})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(y,{type:"submit",disabled:T,children:"Save Changes"})})]})})]})})]})}export{oe as default};
