import{r as i,j as e,m as B,K as M,L as q,$ as K}from"./App-RCZf4Oj7.js";import{u as O,c as E,B as H}from"./button-c9ic-fOB.js";import{I as j}from"./input-BzAsFOCX.js";import{L as w}from"./label-BK41ekJv.js";import{u as $,c as z,a as R}from"./index-DQmsG2na.js";import{u as G}from"./index-BVknzT5Z.js";import{u as X}from"./index-j9oXl22B.js";import{P as U}from"./Combination-SYSJioZv.js";import{P as I}from"./index-CxaUTmkl.js";import{C as V}from"./index-BkidR4kz.js";import{G as J}from"./GuestLayout-VLTz_pHW.js";import"./createLucideIcon-DysgWwsB.js";import"./theme-switcher-C7zo5Vjy.js";import"./dropdown-menu-BJIcfCxy.js";var N="Checkbox",[Q,he]=z(N),[W,Y]=Q(N),S=i.forwardRef((s,l)=>{const{__scopeCheckbox:t,name:u,checked:d,defaultChecked:r,required:h,disabled:m,value:f="on",onCheckedChange:o,form:p,...a}=s,[n,b]=i.useState(null),k=O(l,c=>b(c)),C=i.useRef(!1),P=n?p||!!n.closest("form"):!0,[g=!1,v]=$({prop:d,defaultProp:r,onChange:o}),_=i.useRef(g);return i.useEffect(()=>{const c=n==null?void 0:n.form;if(c){const y=()=>v(_.current);return c.addEventListener("reset",y),()=>c.removeEventListener("reset",y)}},[n,v]),e.jsxs(W,{scope:t,state:g,disabled:m,children:[e.jsx(I.button,{type:"button",role:"checkbox","aria-checked":x(g)?"mixed":g,"aria-required":h,"data-state":D(g),"data-disabled":m?"":void 0,disabled:m,value:f,...a,ref:k,onKeyDown:R(s.onKeyDown,c=>{c.key==="Enter"&&c.preventDefault()}),onClick:R(s.onClick,c=>{v(y=>x(y)?!0:!y),P&&(C.current=c.isPropagationStopped(),C.current||c.stopPropagation())})}),P&&e.jsx(Z,{control:n,bubbles:!C.current,name:u,value:f,checked:g,required:h,disabled:m,form:p,style:{transform:"translateX(-100%)"},defaultChecked:x(r)?!1:r})]})});S.displayName=N;var F="CheckboxIndicator",L=i.forwardRef((s,l)=>{const{__scopeCheckbox:t,forceMount:u,...d}=s,r=Y(F,t);return e.jsx(U,{present:u||x(r.state)||r.state===!0,children:e.jsx(I.span,{"data-state":D(r.state),"data-disabled":r.disabled?"":void 0,...d,ref:l,style:{pointerEvents:"none",...s.style}})})});L.displayName=F;var Z=s=>{const{control:l,checked:t,bubbles:u=!0,defaultChecked:d,...r}=s,h=i.useRef(null),m=G(t),f=X(l);i.useEffect(()=>{const p=h.current,a=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(a,"checked").set;if(m!==t&&b){const k=new Event("click",{bubbles:u});p.indeterminate=x(t),b.call(p,x(t)?!1:t),p.dispatchEvent(k)}},[m,t,u]);const o=i.useRef(x(t)?!1:t);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:d??o.current,...r,tabIndex:-1,ref:h,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function x(s){return s==="indeterminate"}function D(s){return x(s)?"indeterminate":s?"checked":"unchecked"}var T=S,ee=L;const A=i.forwardRef(({className:s,...l},t)=>e.jsx(T,{ref:t,className:E("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...l,children:e.jsx(ee,{className:E("flex items-center justify-center text-current"),children:e.jsx(V,{className:"h-4 w-4"})})}));A.displayName=T.displayName;function fe({status:s,canResetPassword:l}){const[t,u]=i.useState(!1),{data:d,setData:r,post:h,processing:m,reset:f}=B({Identity:"",Password:"",Remember:!1,Code:""}),{errors:o}=M().props;console.log(o);const p=a=>{a.preventDefault(),h(t?"/auth/twofactor":"/auth/Login",{onSuccess:n=>{var b;(b=n==null?void 0:n.props)!=null&&b.requiresTwoFactor&&(u(!0),f("Password"))},onFinish:()=>{t||f("Password")}})};return e.jsxs(J,{children:[e.jsx(q,{title:t?"Two Factor Authentication":"Log in"}),o.message&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:o.message}),e.jsx("div",{className:"lg:p-8",children:e.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[e.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:t?"Two Factor Authentication":"Login to your account"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Please confirm access to your account by entering the authentication code provided by your authenticator application.":"Enter your credentials below to login to your account"})]}),s&&e.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:s}),e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"grid gap-4",children:[t?e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"code",children:"Authentication Code"}),e.jsx(j,{id:"code",type:"text",inputMode:"numeric",name:"code",value:d.code,autoComplete:"one-time-code",onChange:a=>r("code",a.target.value)}),o.code&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:o.code})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"Identity",children:"Username or Email"}),e.jsx(j,{id:"Identity",type:"text",placeholder:"m@example.com",name:"Identity",value:d.Identity,autoComplete:"username",onChange:a=>r("Identity",a.target.value)}),o.identity&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:o.identity})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"Password",children:"Password"}),e.jsx(j,{id:"Password",type:"Password",name:"Password",value:d.Password,autoComplete:"current-password",onChange:a=>r("Password",a.target.value)}),o.password&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:o.password})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"remember",checked:d.remember,onCheckedChange:a=>r("Remember",a)}),e.jsx("label",{htmlFor:"remember",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Remember me"})]})]}),e.jsx(H,{className:"w-full",type:"submit",disabled:m,children:t?"Verify":"Log in"})]})}),!t&&l&&e.jsx("div",{className:"text-center text-sm",children:e.jsx(K,{href:route("password.request"),className:"text-sm text-muted-foreground underline underline-offset-4 hover:text-primary",children:"Forgot your password?"})})]})})]})}export{fe as default};
