import{r as i,j as e,m as B,L as M,$ as q}from"./App-CmqUjaN5.js";import{u as O,c as I,B as H}from"./button-P3a7UsiS.js";import{I as j}from"./input-BNaBDwi7.js";import{L as w}from"./label-BEB_8ICF.js";import{u as K,c as $,a as E}from"./index-CoAmXZ53.js";import{u as z}from"./index-CgeA6eXF.js";import{u as G}from"./index-BJ4xYr-b.js";import{P as X}from"./Combination-DIdNSm4m.js";import{P as R}from"./index-cPx927kp.js";import{C as U}from"./index-MP6m9tZ7.js";import{G as V}from"./GuestLayout-BFqP8bLj.js";import"./createLucideIcon-DiUTaDX6.js";import"./theme-switcher-rNNMMUfo.js";import"./dropdown-menu-DXpi-5_y.js";var P="Checkbox",[J,pe]=$(P),[Q,W]=J(P),S=i.forwardRef((r,l)=>{const{__scopeCheckbox:t,name:u,checked:d,defaultChecked:s,required:h,disabled:m,value:n="on",onCheckedChange:b,form:x,...o}=r,[a,f]=i.useState(null),C=O(l,c=>f(c)),k=i.useRef(!1),N=a?x||!!a.closest("form"):!0,[y=!1,v]=K({prop:d,defaultProp:s,onChange:b}),_=i.useRef(y);return i.useEffect(()=>{const c=a==null?void 0:a.form;if(c){const g=()=>v(_.current);return c.addEventListener("reset",g),()=>c.removeEventListener("reset",g)}},[a,v]),e.jsxs(Q,{scope:t,state:y,disabled:m,children:[e.jsx(R.button,{type:"button",role:"checkbox","aria-checked":p(y)?"mixed":y,"aria-required":h,"data-state":D(y),"data-disabled":m?"":void 0,disabled:m,value:n,...o,ref:C,onKeyDown:E(r.onKeyDown,c=>{c.key==="Enter"&&c.preventDefault()}),onClick:E(r.onClick,c=>{v(g=>p(g)?!0:!g),N&&(k.current=c.isPropagationStopped(),k.current||c.stopPropagation())})}),N&&e.jsx(Y,{control:a,bubbles:!k.current,name:u,value:n,checked:y,required:h,disabled:m,form:x,style:{transform:"translateX(-100%)"},defaultChecked:p(s)?!1:s})]})});S.displayName=P;var F="CheckboxIndicator",L=i.forwardRef((r,l)=>{const{__scopeCheckbox:t,forceMount:u,...d}=r,s=W(F,t);return e.jsx(X,{present:u||p(s.state)||s.state===!0,children:e.jsx(R.span,{"data-state":D(s.state),"data-disabled":s.disabled?"":void 0,...d,ref:l,style:{pointerEvents:"none",...r.style}})})});L.displayName=F;var Y=r=>{const{control:l,checked:t,bubbles:u=!0,defaultChecked:d,...s}=r,h=i.useRef(null),m=z(t),n=G(l);i.useEffect(()=>{const x=h.current,o=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(o,"checked").set;if(m!==t&&f){const C=new Event("click",{bubbles:u});x.indeterminate=p(t),f.call(x,p(t)?!1:t),x.dispatchEvent(C)}},[m,t,u]);const b=i.useRef(p(t)?!1:t);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:d??b.current,...s,tabIndex:-1,ref:h,style:{...r.style,...n,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function p(r){return r==="indeterminate"}function D(r){return p(r)?"indeterminate":r?"checked":"unchecked"}var T=S,Z=L;const A=i.forwardRef(({className:r,...l},t)=>e.jsx(T,{ref:t,className:I("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...l,children:e.jsx(Z,{className:I("flex items-center justify-center text-current"),children:e.jsx(U,{className:"h-4 w-4"})})}));A.displayName=T.displayName;function he({status:r,canResetPassword:l}){const[t,u]=i.useState(!1),{data:d,setData:s,post:h,processing:m,errors:n,reset:b}=B({Identity:"",Password:"",Remember:!1,Code:""}),x=o=>{o.preventDefault(),h(t?"/auth/twofactor":"/auth/Login",{onSuccess:a=>{var f;(f=a==null?void 0:a.props)!=null&&f.requiresTwoFactor&&(u(!0),b("Password"))},onFinish:()=>{t||b("Password")}})};return e.jsxs(V,{children:[e.jsx(M,{title:t?"Two Factor Authentication":"Log in"}),e.jsx("div",{className:"lg:p-8",children:e.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[e.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:t?"Two Factor Authentication":"Login to your account"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Please confirm access to your account by entering the authentication code provided by your authenticator application.":"Enter your credentials below to login to your account"})]}),r&&e.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:r}),e.jsx("form",{onSubmit:x,children:e.jsxs("div",{className:"grid gap-4",children:[t?e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"code",children:"Authentication Code"}),e.jsx(j,{id:"code",type:"text",inputMode:"numeric",name:"code",value:d.code,autoComplete:"one-time-code",onChange:o=>s("code",o.target.value)}),n.code&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.code})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"Identity",children:"Username or Email"}),e.jsx(j,{id:"Identity",type:"text",placeholder:"m@example.com",name:"Identity",value:d.Identity,autoComplete:"username",onChange:o=>s("Identity",o.target.value)}),n.Identity&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.Identity})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"Password",children:"Password"}),e.jsx(j,{id:"Password",type:"Password",name:"Password",value:d.Password,autoComplete:"current-password",onChange:o=>s("Password",o.target.value)}),n.Password&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.Password})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:"remember",checked:d.remember,onCheckedChange:o=>s("Remember",o)}),e.jsx("label",{htmlFor:"remember",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Remember me"})]})]}),e.jsx(H,{className:"w-full",type:"submit",disabled:m,children:t?"Verify":"Log in"})]})}),!t&&l&&e.jsx("div",{className:"text-center text-sm",children:e.jsx(q,{href:route("password.request"),className:"text-sm text-muted-foreground underline underline-offset-4 hover:text-primary",children:"Forgot your password?"})})]})})]})}export{he as default};
